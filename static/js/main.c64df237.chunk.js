(this["webpackJsonpvoting-app"]=this["webpackJsonpvoting-app"]||[]).push([[0],{125:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n(14),i=n.n(c),s=(n(94),n(29)),o=n(30),r=n(73);const d="FETCH_QUESTIONS_SUCCESS",l="IS_LOADING",h="FETCH_QUESTIONS_ERROR",j="FETCH_QUESTION_SUCCESS";var b=Object(o.c)({questions:(e={},t)=>{switch(t.type){case d:return Object.assign({},e,t.questions);default:return e}},questionsHaveError:(e=!1,t)=>{switch(t.type){case h:return t.hasError;default:return e}},selectedQuestion:(e={},t)=>{switch(t.type){case j:return Object.assign({},e,t.question);default:return e}},isLoading:(e=!1,t)=>{switch(t.type){case l:return t.isLoading;default:return e}}});var u=e=>{const t=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):o.d)(Object(o.a)(r.a));return Object(o.e)(b,e,t)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var p=n(27),O=n(13),m=n(7),x=n(8),g=n(154),y=n(33),v=n.n(y);const w=e=>({type:h,hasError:e}),S=e=>({type:l,isLoading:e}),f="https://polls.apiblueprint.org",k=()=>{let e="".concat(f,"/questions"),t=v.a.get(e);return e=>{e(S(!0)),t.then((t=>{var n;e((n=t.data,{type:d,questions:n})),e(S(!1)),e(w(!1))})).catch((()=>{e(w(!0))}))}};var N=n(74),E=n.n(N);const q={primary:{main:"#00cea5"},secondary:{main:"#164ca3"},highlight:{main:"#131a50"},base:{main:"#ecf7ff",white:"#ffffff",gray:"#c3cad2"}};var C,Q,T,_,H,L=n(3);const I=x.a.div(C||(C=Object(m.a)(["\n  background: ",";\n  border-radius: 5px;\n  box-shadow: 4px 4px 4px -4px ",";\n"])),q.primary.main,q.base.gray);I.displayName="StyledQuestionWrapper";const D=x.a.div(Q||(Q=Object(m.a)(["\n\tbackground: ",";\n  text-align: center;\n  color: ",";\n  padding: 10px;\n"])),q.secondary.main,q.base.white);D.displayName="StyledQuestionHeader";const B=x.a.div(T||(T=Object(m.a)(["\n  display: flex;\n  flex-wrap: row;\n  padding: 10px 15px;\n"])));B.displayName="StyledQuestionBody";const R=x.a.div(_||(_=Object(m.a)(["\n  text-align: right;\n  padding: 15px;\n"])));R.displayName="StyledQuestionFooter";const F=x.a.button(H||(H=Object(m.a)(["\n  font-size: 14px;\n  border: none;\n  background: ",";\n  color: ",";\n  font-weight: bold;\n  padding: 10px 20px;\n  &:hover,\n  &:focus {\n    background-color: ",";\n  }\n"])),q.secondary.main,q.base.white,q.highlight.main);F.displayName="StyledQuestionButton";var V,A,P,U=({question:e,publishedDate:t,choices:n,url:a})=>Object(L.jsxs)(I,{children:[Object(L.jsx)(D,{children:Object(L.jsx)("h5",{children:e})}),Object(L.jsx)(B,{children:Object(L.jsxs)("div",{children:[Object(L.jsxs)("h5",{children:["Published on: ",Object(L.jsx)("span",{children:E()(t).format("MMMM Do YYYY, HH:mm")})]}),Object(L.jsxs)("h5",{children:["Available choices: ",Object(L.jsx)("span",{children:n})]})]})}),Object(L.jsx)(R,{children:Object(L.jsx)(p.b,{to:"".concat(a),children:Object(L.jsx)(F,{"data-hook":"vote-button",children:"Vote"})})})]}),z=n(20),M=n(16),Y=n(57),W=n(164),X=n(167);const J=Object(x.a)(W.a.Header)(V||(V=Object(m.a)(["\n  background: ",";\n  color: ",";\n"])),q.secondary.main,q.base.white);J.displayName="StyledHeader";const G=x.a.p(A||(A=Object(m.a)(["\n  color: ",";\n  font-size: 20px;\n}\n"])),q.highlight.main);G.displayName="StyledText";const $=Object(x.a)(X.a)(P||(P=Object(m.a)(["\n  background: ",";\n  font-weight: bold;\n\t&:hover {\n\t\tbackground: ",";\n\t}\n"])),q.secondary.main,q.highlight.main);$.displayName="StyledButton";var K,Z,ee=e=>Object(L.jsxs)(W.a,Object(Y.a)(Object(Y.a)({},e),{},{size:"lg","data-hook":"info-modal",centered:!0,children:[Object(L.jsx)(J,{children:Object(L.jsx)(W.a.Title,{children:e.header})}),Object(L.jsx)(W.a.Body,{children:Object(L.jsx)(G,{children:e.body})}),Object(L.jsxs)(W.a.Footer,{children:[e.showVotingResults&&Object(L.jsx)($,{"data-hook":"show-results",onClick:e.showVotingResults,children:"Show Results"}),Object(L.jsx)(p.b,{to:"/questions",children:Object(L.jsx)($,{"data-hook":"show-home",onClick:e.onHide,children:"Back to Home"})})]})]}));const te=Object(x.a)(M.a)(K||(K=Object(m.a)(["\n  background: ",";\n  font-weight: bold;\n  border: none;\n\t&:hover {\n\t\tbackground: ",";\n\t}\n"])),q.secondary.main,q.highlight.main);te.displayName="StyledButton";const ne=Object(x.a)(M.i)(Z||(Z=Object(m.a)(["\n  font-weight: bold;\n  color: ",";\n"])),q.highlight.main);ne.displayName="StyledLabel";var ae,ce,ie,se=Object(s.b)(null,{createQuestion:e=>t=>t({type:"QUESTION_CREATED",payload:e}),fetchQuestions:k})((e=>{const t=Object(a.useState)(""),n=Object(z.a)(t,2),c=n[0],i=n[1],s=Object(a.useState)(""),o=Object(z.a)(s,2),r=o[0],d=o[1],l=Object(a.useState)(!1),h=Object(z.a)(l,2),j=h[0],b=h[1],u=Object(a.useState)(""),p=Object(z.a)(u,2),O=p[0],m=p[1],x=Object(a.useState)(""),g=Object(z.a)(x,2),y=g[0],w=g[1];return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsxs)(M.f,{onSubmit:t=>{const n=r.split(","),a='{"question": "'+c+'", "choices": '+JSON.stringify(n)+"}";v.a.post("".concat(f,"/questions?page=1"),a,{headers:{"Content-Type":"application/json"}}).then((()=>{b(!0),w("Success"),m("The new question has been created successfully.")})).catch((()=>{b(!0),w("Error"),m("The new question could not be created. Please try again.")})),e.createQuestion(a),t.preventDefault()},"data-hook":"question-form",children:[Object(L.jsxs)(M.g,{row:!0,children:[Object(L.jsx)(ne,{sm:2,children:"New Question"}),Object(L.jsx)(M.d,{sm:10,children:Object(L.jsx)(M.h,{type:"text","data-hook":"question-name",placeholder:"Type your question here",value:c,onChange:e=>{i(e.target.value)}})})]}),Object(L.jsxs)(M.g,{row:!0,children:[Object(L.jsx)(ne,{sm:2,children:"Choices"}),Object(L.jsx)(M.d,{sm:10,children:Object(L.jsx)(M.h,{type:"textarea","data-hook":"choices-list",placeholder:"Type your choices separated by a comma and a space. Example: Cat, Dog, Rat",value:r,onChange:e=>{d(e.target.value)}})})]}),Object(L.jsx)(M.g,{check:!0,row:!0,children:Object(L.jsx)(M.d,{sm:{size:10,offset:5},children:Object(L.jsx)(te,{children:"Submit Question"})})})]}),Object(L.jsx)(ee,{show:j,onHide:()=>(b(!1),void e.fetchQuestions()),header:y,body:O})]})}));const oe=Object(x.a)(M.a)(ae||(ae=Object(m.a)(["\n  display: block;\n  text-align: center;\n  background: ",";\n  max-width: 80vw;\n  width: 100%;\n  margin: 20px auto;\n  height: 50px;\n  font-size: 24px;\n  border: none;\n  &:hover,\n  &:focus {\n\t\tbackground: ",";\n\t}\n"])),q.secondary.main,q.highlight.main);oe.displayName="StyledButton";const re=Object(x.a)(M.b)(ce||(ce=Object(m.a)(["\n  width: 81%;\n  margin: 0px auto;\n"])));re.displayName="StyledCard";const de=Object(x.a)(M.c)(ie||(ie=Object(m.a)(["\n  background: ",";\n"])),q.primary.main);de.displayName="StyledCardBody";var le,he,je,be,ue,pe,Oe=()=>{const e=Object(a.useState)(!1),t=Object(z.a)(e,2),n=t[0],c=t[1];return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(oe,{color:"primary",onClick:()=>{c(!n)},"data-hook":"create-question",children:"Create Question"}),Object(L.jsx)(M.e,{isOpen:n,children:Object(L.jsx)(re,{children:Object(L.jsx)(de,{children:Object(L.jsx)(se,{})})})})]})},me=n(166),xe=n(169);function ge(){return Object(L.jsx)("div",{children:Object(L.jsxs)(me.a,{severity:"error",children:[Object(L.jsx)(xe.a,{children:"Error"}),"This is an error in fetching data - ",Object(L.jsx)("strong",{children:"Please check your internet connection!"})]})})}const ye=x.a.div(le||(le=Object(m.a)(["\n  min-height: 0;\n  display: inline-block;\n  position: relative;\n  margin: 50px 0;\n  color: ",";\n  width: 100%;\n"])),q.highlight.main);ye.displayName="StyledApp";const ve=x.a.div(he||(he=Object(m.a)(["\n  text-align: center;\n  background: ",";\n  max-width: 80vw;\n  width: 100%;\n  margin: 0 auto;\n  height: 75px;\n  padding-top: 12px;\n"])),q.primary.main);ve.displayName="StyledAppHeader";const we=x.a.div(je||(je=Object(m.a)(["\n  display: grid;\n  grid-template-columns: 1fr 1fr 1fr;\n  grid-column-gap: 20px;\n  grid-row-gap: 20px;\n  justify-items: stretch;\n  align-items: stretch;\n  width: 81%;\n  margin: 1rem auto;\n\t@media (max-width: 870px) {\n\t  grid-template-columns: 1fr 1fr;\n\t}\n\t@media (max-width: 480px) {\n\t  grid-template-columns: 1fr;\n\t}\n"])));we.displayName="StyledContainer";const Se=x.a.div(be||(be=Object(m.a)(["\n  max-width: 60px;\n  width: 100%;\n  margin: 100px auto;\n"])));Se.displayName="StyledLoaderContainer";const fe=Object(x.a)(g.a)(ue||(ue=Object(m.a)(["\n  color: ",";\n"])),q.secondary.main);fe.displayName="StyledLoader";const ke=x.a.div(pe||(pe=Object(m.a)(["\n  max-width: 80vw;\n  width: 100%;\n  margin: 80px auto;\n"])));ke.displayName="StyledError";var Ne,Ee,qe,Ce,Qe,Te,_e,He,Le,Ie,De=Object(s.b)((function({questions:e,isLoading:t,questionsHaveError:n}){return{questions:e,isLoading:t,questionsHaveError:n}}),{fetchQuestions:k})((e=>{Object(a.useEffect)((()=>{e.fetchQuestions()}),[]);const t=e.questions,n=e.isLoading,c=e.questionsHaveError,i=Object.keys(t).map(((e,n)=>Object(L.jsx)(U,{question:t[e].question,publishedDate:t[e].published_at,choices:t[e].choices.length,url:t[e].url},e)));return Object(L.jsxs)(ye,{children:[Object(L.jsx)(ve,{"data-hook":"app-header",children:Object(L.jsx)("h1",{children:"Questions"})}),Object(L.jsx)(Oe,{}),n&&!c&&Object(L.jsx)(Se,{children:Object(L.jsx)(fe,{})}),n&&c&&Object(L.jsx)(ke,{children:Object(L.jsx)(ge,{})}),Object(L.jsx)(we,{"data-hook":"questions-container",children:!n&&i})]})})),Be=n(10),Re=n(158),Fe=n(160),Ve=n(156),Ae=n(157),Pe=n(159),Ue=n(155),ze=n(126),Me=n(168);const Ye=x.a.div(Ne||(Ne=Object(m.a)(["\n  min-height: 0;\n  display: inline-block;\n  position: relative;\n  margin: 50px 0;\n  color: ",";\n  width: 100%;\n"])),q.highlight.main);Ye.displayName="StyledApp";const We=x.a.div(Ee||(Ee=Object(m.a)(["\n  text-align: center;\n  background: ",";\n  max-width: 80vw;\n  width: 100%;\n  margin: 0 auto;\n  height: 75px;\n  padding-top: 12px;\n"])),q.primary.main);We.displayName="StyledAppHeader";const Xe=x.a.div(qe||(qe=Object(m.a)(["\n  display: block;\n  justify-items: stretch;\n  align-items: stretch;\n  width: 80%;\n  margin: 1rem auto;\n"])));Xe.displayName="StyledContainer";const Je=x.a.div(Ce||(Ce=Object(m.a)(["\n  display: block;\n  background: ",";\n  color: ",";\n  max-width: 80vw;\n  width: 100%;\n  margin: 20px auto;\n  height: 60px;\n  font-size: 24px;\n  padding: 12px 0 0 12px;\n"])),q.secondary.main,q.base.white);Je.displayName="StyledQuestion";const Ge=Object(x.a)(Ue.a)(Qe||(Qe=Object(m.a)(["\n  height: 60px;\n  align-items: center;\n  border-radius: 5px;\n  Width: 100%;\n  &.active {\n\t\tbackground: ","; \n  }\n  &:hover{\n    cursor: pointer;\n\t\tbackground: ",";\n  }\n"])),q.primary.main,q.base.main);Ge.displayName="StyledTableBodyRow";const $e=Object(x.a)(Ue.a)(Te||(Te=Object(m.a)(["\n  background: ",";\n"])),q.base.main);$e.displayName="TableHeadRow";const Ke=Object(x.a)(Ve.a)(_e||(_e=Object(m.a)(["\n  color: ",";\n\tfont-weight: bold;\n"])),q.highlight.main);Ke.displayName="StyledTableCell";const Ze=x.a.button(He||(He=Object(m.a)(["\n  background: ",";\n  font-weight: bold;\n  color: ",";\n\tfloat: right;\n  margin-top: 1rem;\n\tborder: none;\n\tpadding: 10px;\n\t&:hover {\n\t\tbackground: ",";\n\t}\n"])),q.secondary.main,q.base.white,q.highlight.main);Ze.displayName="StyledButton";const et=x.a.div(Le||(Le=Object(m.a)(["\n  max-width: 60px;\n  width: 100%;\n  margin: 100px auto;\n"])));et.displayName="StyledLoaderContainer";const tt=Object(x.a)(g.a)(Ie||(Ie=Object(m.a)(["\n  color: ",";\n"])),q.secondary.main);tt.displayName="StyledLoader";const nt=Object(Be.a)((()=>({root:{height:20,borderRadius:5},colorPrimary:{backgroundColor:"#c3cad2"},bar:{backgroundColor:"#164ca3"}})))(Me.a);var at,ct,it,st=Object(s.b)((function({selectedQuestion:e,isLoading:t}){return{selectedQuestion:e,isLoading:t}}),{fetchSingleQuestion:e=>{let t="".concat(f,"/questions/").concat(e),n=v.a.get(t);return e=>{e(S(!0)),n.then((t=>{var n;e((n=t.data,{type:j,question:n})),e(S(!1)),e(w(!1))})).catch((()=>{e(w(!0))}))}},postVote:e=>t=>t({type:"VOTE_SELECTED",payload:e})})((e=>{const t=Object(a.useState)({title:"",url:null}),n=Object(z.a)(t,2),c=n[0],i=n[1],s=Object(a.useState)(!1),o=Object(z.a)(s,2),r=o[0],d=o[1],l=Object(a.useState)(""),h=Object(z.a)(l,2),j=h[0],b=h[1],u=Object(a.useState)(""),p=Object(z.a)(u,2),O=p[0],m=p[1],x=e.selectedQuestion,g=x.question,y=x.choices;Object(a.useEffect)((()=>{const t=e.match.params.questionId;e.fetchSingleQuestion(t)}),[]);const w=e=>{const t=y.reduce(((e,{votes:t})=>e+t),0),n=100*parseInt(e)/t;return isNaN(parseInt(n))?0:n.toFixed(2)},S=y?Object.keys(y).map(((e,t)=>Object(L.jsxs)(Ge,{className:"".concat(c.title===y[e].choice?"active":""),"data-hook":"question-choice",onClick:t=>{t.preventDefault(),(({choice:e,url:t})=>{i({title:e,url:t})})(y[e])},children:[Object(L.jsxs)(Ke,{component:"th",scope:"row",children:[t+1,"."]}),Object(L.jsx)(Ke,{children:y[e].choice}),Object(L.jsx)(Ke,{children:y[e].votes}),Object(L.jsxs)(Ke,{children:[w(y[e].votes)," %"]}),Object(L.jsx)(Ke,{children:Object(L.jsx)(nt,{variant:"determinate",value:parseInt(w(y[e].votes))})})]},e))):null;return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsxs)(Ye,{children:[Object(L.jsx)(We,{children:Object(L.jsx)("h1",{children:"Details"})}),e.isLoading&&Object(L.jsx)(et,{children:Object(L.jsx)(tt,{})}),!e.isLoading&&Object(L.jsxs)(Xe,{children:[Object(L.jsxs)(Je,{children:["Question: ",g]}),Object(L.jsxs)("form",{onSubmit:t=>{v.a.post("".concat(f).concat(c.url)).then((()=>{d(!0),m("Success"),b("Your vote has been submitted successfully.")})).catch((()=>{d(!0),m("Error"),b("Your vote could not be submitted. Please try again.")})),e.postVote(c),t.preventDefault()},children:[Object(L.jsx)(Ae.a,{component:ze.a,children:Object(L.jsxs)(Re.a,{children:[Object(L.jsx)(Pe.a,{children:Object(L.jsxs)($e,{children:[Object(L.jsx)(Ke,{children:"No."}),Object(L.jsx)(Ke,{children:"Choice"}),Object(L.jsx)(Ke,{children:"Votes"}),Object(L.jsx)(Ke,{children:"Percent (%)"}),Object(L.jsx)(Ke,{children:"Progress"})]})}),Object(L.jsx)(Fe.a,{"data-hook":"question-table",children:S})]})}),Object(L.jsx)(Ze,{type:"submit","data-hook":"submit-vote",children:"Submit vote"})]})]})]}),Object(L.jsx)(ee,{show:r,onHide:()=>d(!1),showVotingResults:()=>(()=>{d(!1);const t=e.match.params.questionId;e.fetchSingleQuestion(t)})(),header:O,body:j})]})})),ot=n(161),rt=n(162),dt=n(163),lt=n(165),ht=n(85),jt=n.n(ht),bt=n.p+"static/media/vote.8d8529c3.png";const ut=Object(ot.a)(),pt=Object(x.a)(rt.a)(at||(at=Object(m.a)(["\n  background-color: ",";\n"])),q.secondary.main);pt.displayName="StyledAppBar";const Ot=x.a.img(ct||(ct=Object(m.a)(["\n  max-width: 160px;\n  margin-left: 16px;\n"])));Ot.displayName="StyledAppBarLogo";const mt=Object(x.a)(jt.a)(it||(it=Object(m.a)(["\n  font-size: 48px;\n  color: ",";\n"])),q.primary.main);mt.displayName="StyledHomeIcon";var xt=()=>(ut(),Object(L.jsx)(L.Fragment,{children:Object(L.jsx)(pt,{position:"static","data-hook":"app-bar",children:Object(L.jsxs)(dt.a,{children:[Object(L.jsx)(lt.a,{edge:"start","data-hook":"home-button",children:Object(L.jsx)(p.b,{to:"/questions",children:Object(L.jsx)(mt,{})})}),Object(L.jsx)(Ot,{src:bt,alt:"vote"})]})})}));var gt=()=>Object(L.jsx)(L.Fragment,{children:Object(L.jsxs)(p.a,{children:[Object(L.jsx)(xt,{exact:!0,path:"/questions",component:De}),Object(L.jsx)(O.b,{exact:!0,path:"/voting-app",render:()=>Object(L.jsx)(O.a,{to:"/questions"})}),Object(L.jsxs)(O.d,{children:[Object(L.jsx)(O.b,{path:"/questions/:questionId",component:st}),Object(L.jsx)(O.b,{path:"/questions",component:De}),'"']})]})});n(124);const yt=u();i.a.render(Object(L.jsx)(s.a,{store:yt,children:Object(L.jsx)(gt,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((e=>{e.unregister()}))},94:function(e,t,n){}},[[125,1,2]]]);
//# sourceMappingURL=main.c64df237.chunk.js.map