(this["webpackJsonpvoting-app"]=this["webpackJsonpvoting-app"]||[]).push([[0],{125:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n(14),i=n.n(c),s=(n(94),n(29)),o=n(30),r=n(73);const d="FETCH_QUESTIONS_SUCCESS",l="IS_LOADING",h="FETCH_QUESTIONS_ERROR",j="FETCH_QUESTION_SUCCESS";var b=Object(o.c)({questions:(e={},t)=>{switch(t.type){case d:return Object.assign({},e,t.questions);default:return e}},questionsHaveError:(e=!1,t)=>{switch(t.type){case h:return t.hasError;default:return e}},selectedQuestion:(e={},t)=>{switch(t.type){case j:return Object.assign({},e,t.question);default:return e}},isLoading:(e=!1,t)=>{switch(t.type){case l:return t.isLoading;default:return e}}});var u=e=>{const t=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):o.d)(Object(o.a)(r.a));return Object(o.e)(b,e,t)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var p=n(27),O=n(13),x=n(7),m=n(153),g=n(155),y=n(156),v=n(165),w=n(81),S=n.n(w),f=n(8),k=n.p+"static/media/vote.8d8529c3.png";const N={primary:{main:"#00cea5"},secondary:{main:"#164ca3"},highlight:{main:"#131a50"},base:{main:"#ecf7ff",white:"#ffffff",gray:"#c3cad2"}};var E,q,C,Q=n(3);const T=Object(m.a)(),_=Object(f.a)(g.a)(E||(E=Object(x.a)(["\n  background-color: ",";\n"])),N.secondary.main);_.displayName="StyledAppBar";const H=f.a.img(q||(q=Object(x.a)(["\n  max-width: 160px;\n  margin-left: 16px;\n"])));H.displayName="StyledAppBarLogo";const L=Object(f.a)(S.a)(C||(C=Object(x.a)(["\n  font-size: 48px;\n  color: ",";\n"])),N.primary.main);L.displayName="StyledHomeIcon";var I=()=>(T(),Object(Q.jsx)(Q.Fragment,{children:Object(Q.jsx)(_,{position:"static","data-hook":"app-bar",children:Object(Q.jsxs)(y.a,{children:[Object(Q.jsx)(v.a,{edge:"start","data-hook":"home-button",children:Object(Q.jsx)(p.b,{to:"/questions",children:Object(Q.jsx)(L,{})})}),Object(Q.jsx)(H,{src:k,alt:"vote"})]})})})),D=n(157),B=n(33),R=n.n(B);const F=e=>({type:h,hasError:e}),V=e=>({type:l,isLoading:e}),A="https://polls.apiblueprint.org",P=()=>{let e="".concat(A,"/questions"),t=R.a.get(e);return e=>{e(V(!0)),t.then((t=>{var n;e((n=t.data,{type:d,questions:n})),e(V(!1)),e(F(!1))})).catch((()=>{e(F(!0))}))}};var z,U,M,Y=n(20),W=n(16),X=n(57),J=n(164),G=n(167);const $=Object(f.a)(J.a.Header)(z||(z=Object(x.a)(["\n  background: ",";\n  color: ",";\n"])),N.secondary.main,N.base.white);$.displayName="StyledHeader";const K=f.a.p(U||(U=Object(x.a)(["\n  color: ",";\n  font-size: 20px;\n}\n"])),N.highlight.main);K.displayName="StyledText";const Z=Object(f.a)(G.a)(M||(M=Object(x.a)(["\n  background: ",";\n  font-weight: bold;\n\t&:hover {\n\t\tbackground: ",";\n\t}\n"])),N.secondary.main,N.highlight.main);Z.displayName="StyledButton";var ee,te,ne=e=>Object(Q.jsxs)(J.a,Object(X.a)(Object(X.a)({},e),{},{size:"lg","data-hook":"info-modal",centered:!0,children:[Object(Q.jsx)($,{children:Object(Q.jsx)(J.a.Title,{children:e.header})}),Object(Q.jsx)(J.a.Body,{children:Object(Q.jsx)(K,{children:e.body})}),Object(Q.jsxs)(J.a.Footer,{children:[e.showVotingResults&&Object(Q.jsx)(Z,{"data-hook":"show-results",onClick:e.showVotingResults,children:"Show Results"}),Object(Q.jsx)(p.b,{to:"/questions",children:Object(Q.jsx)(Z,{"data-hook":"show-home",onClick:e.onHide,children:"Back to Home"})})]})]}));const ae=Object(f.a)(W.a)(ee||(ee=Object(x.a)(["\n  background: ",";\n  font-weight: bold;\n  border: none;\n\t&:hover {\n\t\tbackground: ",";\n\t}\n"])),N.secondary.main,N.highlight.main);ae.displayName="StyledButton";const ce=Object(f.a)(W.i)(te||(te=Object(x.a)(["\n  font-weight: bold;\n  color: ",";\n"])),N.highlight.main);ce.displayName="StyledLabel";var ie,se,oe,re=Object(s.b)(null,{createQuestion:e=>t=>t({type:"QUESTION_CREATED",payload:e}),fetchQuestions:P})((e=>{const t=Object(a.useState)(""),n=Object(Y.a)(t,2),c=n[0],i=n[1],s=Object(a.useState)(""),o=Object(Y.a)(s,2),r=o[0],d=o[1],l=Object(a.useState)(!1),h=Object(Y.a)(l,2),j=h[0],b=h[1],u=Object(a.useState)(""),p=Object(Y.a)(u,2),O=p[0],x=p[1],m=Object(a.useState)(""),g=Object(Y.a)(m,2),y=g[0],v=g[1];return Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsxs)(W.f,{onSubmit:t=>{const n=r.split(","),a='{"question": "'+c+'", "choices": '+JSON.stringify(n)+"}";R.a.post("".concat(A,"/questions?page=1"),a,{headers:{"Content-Type":"application/json"}}).then((()=>{b(!0),v("Success"),x("The new question has been created successfully.")})).catch((()=>{b(!0),v("Error"),x("The new question could not be created. Please try again.")})),e.createQuestion(a),t.preventDefault()},"data-hook":"question-form",children:[Object(Q.jsxs)(W.g,{row:!0,children:[Object(Q.jsx)(ce,{sm:2,children:"New Question"}),Object(Q.jsx)(W.d,{sm:10,children:Object(Q.jsx)(W.h,{type:"text","data-hook":"question-name",placeholder:"Type your question here",value:c,onChange:e=>{i(e.target.value)}})})]}),Object(Q.jsxs)(W.g,{row:!0,children:[Object(Q.jsx)(ce,{sm:2,children:"Choices"}),Object(Q.jsx)(W.d,{sm:10,children:Object(Q.jsx)(W.h,{type:"textarea","data-hook":"choices-list",placeholder:"Type your choices separated by a comma and a space. Example: Cat, Dog, Rat",value:r,onChange:e=>{d(e.target.value)}})})]}),Object(Q.jsx)(W.g,{check:!0,row:!0,children:Object(Q.jsx)(W.d,{sm:{size:10,offset:5},children:Object(Q.jsx)(ae,{children:"Submit Question"})})})]}),Object(Q.jsx)(ne,{show:j,onHide:()=>(b(!1),void e.fetchQuestions()),header:y,body:O})]})}));const de=Object(f.a)(W.a)(ie||(ie=Object(x.a)(["\n  display: block;\n  text-align: center;\n  background: ",";\n  max-width: 80vw;\n  width: 100%;\n  margin: 20px auto;\n  height: 50px;\n  font-size: 24px;\n  border: none;\n  &:hover,\n  &:focus {\n\t\tbackground: ",";\n\t}\n"])),N.secondary.main,N.highlight.main);de.displayName="StyledButton";const le=Object(f.a)(W.b)(se||(se=Object(x.a)(["\n  width: 81%;\n  margin: 0px auto;\n"])));le.displayName="StyledCard";const he=Object(f.a)(W.c)(oe||(oe=Object(x.a)(["\n  background: ",";\n"])),N.primary.main);he.displayName="StyledCardBody";var je=()=>{const e=Object(a.useState)(!1),t=Object(Y.a)(e,2),n=t[0],c=t[1];return Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)(de,{color:"primary",onClick:()=>{c(!n)},"data-hook":"create-question",children:"Create Question"}),Object(Q.jsx)(W.e,{isOpen:n,children:Object(Q.jsx)(le,{children:Object(Q.jsx)(he,{children:Object(Q.jsx)(re,{})})})})]})},be=n(166),ue=n(169);function pe(){return Object(Q.jsx)("div",{children:Object(Q.jsxs)(be.a,{severity:"error",children:[Object(Q.jsx)(ue.a,{children:"Error"}),"This is an error in fetching data - ",Object(Q.jsx)("strong",{children:"Please check your internet connection!"})]})})}var Oe,xe,me,ge,ye,ve=n(85),we=n.n(ve);const Se=f.a.div(Oe||(Oe=Object(x.a)(["\n  background: ",";\n  border-radius: 5px;\n  box-shadow: 4px 4px 4px -4px ",";\n"])),N.primary.main,N.base.gray);Se.displayName="StyledQuestionWrapper";const fe=f.a.div(xe||(xe=Object(x.a)(["\n\tbackground: ",";\n  text-align: center;\n  color: ",";\n  padding: 10px;\n"])),N.secondary.main,N.base.white);fe.displayName="StyledQuestionHeader";const ke=f.a.div(me||(me=Object(x.a)(["\n  display: flex;\n  flex-wrap: row;\n  padding: 10px 15px;\n"])));ke.displayName="StyledQuestionBody";const Ne=f.a.div(ge||(ge=Object(x.a)(["\n  text-align: right;\n  padding: 15px;\n"])));Ne.displayName="StyledQuestionFooter";const Ee=f.a.button(ye||(ye=Object(x.a)(["\n  font-size: 14px;\n  border: none;\n  background: ",";\n  color: ",";\n  font-weight: bold;\n  padding: 10px 20px;\n  &:hover,\n  &:focus {\n    background-color: ",";\n  }\n"])),N.secondary.main,N.base.white,N.highlight.main);Ee.displayName="StyledQuestionButton";var qe,Ce,Qe,Te,_e,He,Le=({question:e,publishedDate:t,choices:n,url:a})=>Object(Q.jsxs)(Se,{children:[Object(Q.jsx)(fe,{children:Object(Q.jsx)("h5",{children:e})}),Object(Q.jsx)(ke,{children:Object(Q.jsxs)("div",{children:[Object(Q.jsxs)("h5",{children:["Published on: ",Object(Q.jsx)("span",{children:we()(t).format("MMMM Do YYYY, HH:mm")})]}),Object(Q.jsxs)("h5",{children:["Available choices: ",Object(Q.jsx)("span",{children:n})]})]})}),Object(Q.jsx)(Ne,{children:Object(Q.jsx)(p.b,{to:"".concat(a),children:Object(Q.jsx)(Ee,{"data-hook":"vote-button",children:"Vote"})})})]});const Ie=f.a.div(qe||(qe=Object(x.a)(["\n  min-height: 0;\n  display: inline-block;\n  position: relative;\n  margin: 50px 0;\n  color: ",";\n  width: 100%;\n"])),N.highlight.main);Ie.displayName="StyledApp";const De=f.a.div(Ce||(Ce=Object(x.a)(["\n  text-align: center;\n  background: ",";\n  max-width: 80vw;\n  width: 100%;\n  margin: 0 auto;\n  height: 75px;\n  padding-top: 12px;\n"])),N.primary.main);De.displayName="StyledAppHeader";const Be=f.a.div(Qe||(Qe=Object(x.a)(["\n  display: grid;\n  grid-template-columns: 1fr 1fr 1fr;\n  grid-column-gap: 20px;\n  grid-row-gap: 20px;\n  justify-items: stretch;\n  align-items: stretch;\n  width: 81%;\n  margin: 1rem auto;\n\t@media (max-width: 870px) {\n\t  grid-template-columns: 1fr 1fr;\n\t}\n\t@media (max-width: 480px) {\n\t  grid-template-columns: 1fr;\n\t}\n"])));Be.displayName="StyledContainer";const Re=f.a.div(Te||(Te=Object(x.a)(["\n  max-width: 60px;\n  width: 100%;\n  margin: 100px auto;\n"])));Re.displayName="StyledLoaderContainer";const Fe=Object(f.a)(D.a)(_e||(_e=Object(x.a)(["\n  color: ",";\n"])),N.secondary.main);Fe.displayName="StyledLoader";const Ve=f.a.div(He||(He=Object(x.a)(["\n  max-width: 80vw;\n  width: 100%;\n  margin: 80px auto;\n"])));Ve.displayName="StyledError";var Ae,Pe,ze,Ue,Me,Ye,We,Xe,Je,Ge,$e=Object(s.b)((function({questions:e,isLoading:t,questionsHaveError:n}){return{questions:e,isLoading:t,questionsHaveError:n}}),{fetchQuestions:P})((e=>{Object(a.useEffect)((()=>{e.fetchQuestions()}),[]);const t=e.questions,n=e.isLoading,c=e.questionsHaveError,i=Object.keys(t).map(((e,n)=>Object(Q.jsx)(Le,{question:t[e].question,publishedDate:t[e].published_at,choices:t[e].choices.length,url:t[e].url},e)));return Object(Q.jsxs)(Ie,{children:[Object(Q.jsx)(De,{"data-hook":"app-header",children:Object(Q.jsx)("h1",{children:"Questions"})}),Object(Q.jsx)(je,{}),n&&!c&&Object(Q.jsx)(Re,{children:Object(Q.jsx)(Fe,{})}),n&&c&&Object(Q.jsx)(Ve,{children:Object(Q.jsx)(pe,{})}),Object(Q.jsx)(Be,{"data-hook":"questions-container",children:!n&&i})]})})),Ke=n(10),Ze=n(161),et=n(163),tt=n(159),nt=n(160),at=n(162),ct=n(158),it=n(126),st=n(168);const ot=f.a.div(Ae||(Ae=Object(x.a)(["\n  min-height: 0;\n  display: inline-block;\n  position: relative;\n  margin: 50px 0;\n  color: ",";\n  width: 100%;\n"])),N.highlight.main);ot.displayName="StyledApp";const rt=f.a.div(Pe||(Pe=Object(x.a)(["\n  text-align: center;\n  background: ",";\n  max-width: 80vw;\n  width: 100%;\n  margin: 0 auto;\n  height: 75px;\n  padding-top: 12px;\n"])),N.primary.main);rt.displayName="StyledAppHeader";const dt=f.a.div(ze||(ze=Object(x.a)(["\n  display: block;\n  justify-items: stretch;\n  align-items: stretch;\n  width: 80%;\n  margin: 1rem auto;\n"])));dt.displayName="StyledContainer";const lt=f.a.div(Ue||(Ue=Object(x.a)(["\n  display: block;\n  background: ",";\n  color: ",";\n  max-width: 80vw;\n  width: 100%;\n  margin: 20px auto;\n  height: 60px;\n  font-size: 24px;\n  padding: 12px 0 0 12px;\n  @media (max-width: 480px) {\n    font-size: 18px;\n    padding: 6px 0 0 10px;\n  }\n"])),N.secondary.main,N.base.white);lt.displayName="StyledQuestion";const ht=Object(f.a)(ct.a)(Me||(Me=Object(x.a)(["\n  height: 60px;\n  align-items: center;\n  border-radius: 5px;\n  Width: 100%;\n  &.active {\n\t\tbackground: ","; \n  }\n  &:hover{\n    cursor: pointer;\n\t\tbackground: ",";\n  }\n"])),N.primary.main,N.base.main);ht.displayName="StyledTableBodyRow";const jt=Object(f.a)(ct.a)(Ye||(Ye=Object(x.a)(["\n  background: ",";\n"])),N.base.main);jt.displayName="TableHeadRow";const bt=Object(f.a)(tt.a)(We||(We=Object(x.a)(["\n  color: ",";\n\tfont-weight: bold;\n"])),N.highlight.main);bt.displayName="StyledTableCell";const ut=f.a.button(Xe||(Xe=Object(x.a)(["\n  background: ",";\n  font-weight: bold;\n  color: ",";\n\tfloat: right;\n  margin-top: 1rem;\n\tborder: none;\n\tpadding: 10px;\n\t&:hover {\n\t\tbackground: ",";\n\t}\n"])),N.secondary.main,N.base.white,N.highlight.main);ut.displayName="StyledButton";const pt=f.a.div(Je||(Je=Object(x.a)(["\n  max-width: 60px;\n  width: 100%;\n  margin: 100px auto;\n"])));pt.displayName="StyledLoaderContainer";const Ot=Object(f.a)(D.a)(Ge||(Ge=Object(x.a)(["\n  color: ",";\n"])),N.secondary.main);Ot.displayName="StyledLoader";const xt=Object(Ke.a)((()=>({root:{height:20,borderRadius:5},colorPrimary:{backgroundColor:"#c3cad2"},bar:{backgroundColor:"#164ca3"}})))(st.a);var mt=Object(s.b)((function({selectedQuestion:e,isLoading:t}){return{selectedQuestion:e,isLoading:t}}),{fetchSingleQuestion:e=>{let t="".concat(A,"/questions/").concat(e),n=R.a.get(t);return e=>{e(V(!0)),n.then((t=>{var n;e((n=t.data,{type:j,question:n})),e(V(!1)),e(F(!1))})).catch((()=>{e(F(!0))}))}},postVote:e=>t=>t({type:"VOTE_SELECTED",payload:e})})((e=>{const t=Object(a.useState)({title:"",url:null}),n=Object(Y.a)(t,2),c=n[0],i=n[1],s=Object(a.useState)(!1),o=Object(Y.a)(s,2),r=o[0],d=o[1],l=Object(a.useState)(""),h=Object(Y.a)(l,2),j=h[0],b=h[1],u=Object(a.useState)(""),p=Object(Y.a)(u,2),O=p[0],x=p[1],m=e.selectedQuestion,g=m.question,y=m.choices;Object(a.useEffect)((()=>{const t=e.match.params.questionId;e.fetchSingleQuestion(t)}),[]);const v=e=>{const t=y.reduce(((e,{votes:t})=>e+t),0),n=100*parseInt(e)/t;return isNaN(parseInt(n))?0:n.toFixed(2)},w=y?Object.keys(y).map(((e,t)=>Object(Q.jsxs)(ht,{className:"".concat(c.title===y[e].choice?"active":""),"data-hook":"question-choice",onClick:t=>{t.preventDefault(),(({choice:e,url:t})=>{i({title:e,url:t})})(y[e])},children:[Object(Q.jsxs)(bt,{component:"th",scope:"row",children:[t+1,"."]}),Object(Q.jsx)(bt,{children:y[e].choice}),Object(Q.jsx)(bt,{children:y[e].votes}),Object(Q.jsxs)(bt,{children:[v(y[e].votes)," %"]}),Object(Q.jsx)(bt,{children:Object(Q.jsx)(xt,{variant:"determinate",value:parseInt(v(y[e].votes))})})]},e))):null;return Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsxs)(ot,{children:[Object(Q.jsx)(rt,{children:Object(Q.jsx)("h1",{children:"Details"})}),e.isLoading&&Object(Q.jsx)(pt,{children:Object(Q.jsx)(Ot,{})}),!e.isLoading&&Object(Q.jsxs)(dt,{children:[Object(Q.jsxs)(lt,{children:["Question: ",g]}),Object(Q.jsxs)("form",{onSubmit:t=>{R.a.post("".concat(A).concat(c.url)).then((()=>{d(!0),x("Success"),b("Your vote has been submitted successfully.")})).catch((()=>{d(!0),x("Error"),b("Your vote could not be submitted. Please try again.")})),e.postVote(c),t.preventDefault()},children:[Object(Q.jsx)(nt.a,{component:it.a,children:Object(Q.jsxs)(Ze.a,{children:[Object(Q.jsx)(at.a,{children:Object(Q.jsxs)(jt,{children:[Object(Q.jsx)(bt,{children:"No."}),Object(Q.jsx)(bt,{children:"Choice"}),Object(Q.jsx)(bt,{children:"Votes"}),Object(Q.jsx)(bt,{children:"Percent (%)"}),Object(Q.jsx)(bt,{children:"Progress"})]})}),Object(Q.jsx)(et.a,{"data-hook":"question-table",children:w})]})}),Object(Q.jsx)(ut,{type:"submit","data-hook":"submit-vote",children:"Submit vote"})]})]})]}),Object(Q.jsx)(ne,{show:r,onHide:()=>d(!1),showVotingResults:()=>(()=>{d(!1);const t=e.match.params.questionId;e.fetchSingleQuestion(t)})(),header:O,body:j})]})}));var gt=()=>Object(Q.jsx)(Q.Fragment,{children:Object(Q.jsxs)(p.a,{children:[Object(Q.jsx)(I,{exact:!0,path:"/questions",component:$e}),Object(Q.jsx)(O.b,{exact:!0,path:"/voting-app",render:()=>Object(Q.jsx)(O.a,{to:"/questions"})}),Object(Q.jsxs)(O.d,{children:[Object(Q.jsx)(O.b,{path:"/questions/:questionId",component:mt}),Object(Q.jsx)(O.b,{path:"/questions",component:$e}),'"']})]})});n(124);const yt=u();i.a.render(Object(Q.jsx)(s.a,{store:yt,children:Object(Q.jsx)(gt,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((e=>{e.unregister()}))},94:function(e,t,n){}},[[125,1,2]]]);
//# sourceMappingURL=main.7d0709ec.chunk.js.map